NODE_ENV=development
ENABLE_COLLECTOR=true
ENABLE_FEATURES=true
ENABLE_MODEL=true
ENABLE_SIGNAL=false

OKX_API_KEY=fff2ae89-f45f-4e19-a1e8-ab374694f3ef
OKX_API_SECRET=F20AF6C2EDC81DB5FFBA6147FD194621
OKX_API_PASSPHRASE=Wszy1989@


ASSETS=BTC,ETH,LTC,OKB,ICP,DOGE,SOL
BAR_GRANULARITY_MIN=5
FETCH_LOOKBACK_MIN=30
CRON_COLLECT=*/1 * * * *
CRON_FEATURES=*/1 * * * *
CRON_MODEL=*/1 * * * *
CRON_SIGNAL=*/1 * * * *

OKX_BASE=https://www.okx.com
OKX_TIMEOUT_MS=5000
OKX_RETRY=3
OKX_RETRY_BACKOFF_MS=500

REDIS_URL=redis://127.0.0.1:6379/0
REDIS_TTL_DAYS=14
REDIS_NAMESPACE=quant

METRICS_PORT=9100
METRICS_PREFIX=quant_

# Mongo
MONGO_URL=mongodb://localhost:27017/quant?

MONGO_DB=quant

# bars TTL（天）
BAR_TTL_DAYS=14

# status TTL（天）
STATUS_TTL_DAYS=7

#RECO
CRON_RECO=45 * * * * *      # 每分钟第45秒跑一轮
# 每次 tick 的并发度（建议 2~4）
RECO_CONCURRENCY=3
# 启动后是否立刻跑一轮
BUILD_RECO_ON_BOOT=1
TH_UP=0.8
TH_DN=-0.8
TH_CLOSE=0.15
DEFAULT_NOTIONAL_USDT=100

#ORDER
CRON_RECO_TO_ORDER=50 * * * * *
OKX_TDMODE=isolated
DEFAULT_LEVERAGE=5

# 受控并发（按你的机器和 OKX 限速慢慢调）
CONCURRENCY_SYMBOLS=3
CONCURRENCY_ENDPOINTS=3
JITTER_MS=200

# RUBIK API 控制（按你的机器和 RUBIK 限速慢慢调）
RUBIK_MIN_INTERVAL_MS=120   # 提升到 150/180 会更稳；降低到 90/100 会更快
RUBIK_ERROR_RETRY=1
RUBIK_JITTER_MS=200
RUBIK_BACKOFF_MS=300

NEUTRAL_BARS=3             # 需要连续多少根 |score|<=TH_CLOSE 才允许 CLOSE
CLOSE_REQUIRE_MIN_HOLD=1   # 是否强制满足最小持仓时间（risk.minHoldMinutes）


# —— signal 层基础阈值
SIGNAL_TH_UP=0.8
SIGNAL_TH_DN=-0.8

# —— 去抖&稳定化
SIGNAL_EMA_BARS=3           # 用于对 score_24h 做 EMA 平滑（窗口≥2）
SIGNAL_DEADBAND=0.12        # 中性带：|score| < deadband => FLAT
SIGNAL_CONFIRM_BARS=2       # 方向切换需要连续 K 根满足

# —— 行为
DRY_RUN=1                   # 1=只写库/打日志；0=发事件（或你自行触发后续）

# 反手阈值（可选，不设则使用 TH_UP/TH_DN）
TH_REV_UP=0.9
TH_REV_DN=-0.9

# 反手/开仓需超距（hysteresis，附加在阈值上；两者二选一用即可）
HYSTERESIS_OPEN=0.00
HYSTERESIS_REVERSE=0.10

# 开仓/反手后，至少 N 根 bar 内不允许 CLOSE/REVERSE
COOLDOWN_BARS=2

# 每小时最多反手次数（防极端抖动）
MAX_REVERSES_PER_HOUR=3

# 可选：按币种覆盖阈值，JSON 字符串
# 例：{"ETH-USDT-SWAP":{"TH_UP":0.85,"TH_DN":-0.85,"TH_CLOSE":0.12}}
SYMBOL_THRESHOLDS_JSON={}